{
  "name": "Part 2 of Creating a DHIS2 Program Enrollment for a Tracked Entity Instance",
  "endpoint": {
    "method": "POST",
    "pattern": "/createEnrollment"
  },
  "transformation": {
    "input": "JSON",
    "output": "JSON"
  },
  "inputMapping": {
    "constants.program": "program",
    "query.trackedEntityInstance": "trackedEntityInstance",
    "query.orgUnit": "orgUnit",
    "transforms.enrollmentDate": {
      "key": "enrollmentDate",
      "transform": {
        "function": "dateTimeToDate"
      }
    },
    "transforms.incidentDate": {
      "key": "incidentDate",
      "transform": {
        "function": "dateTimeToDate"
      }
    }
  },
  "inputTransforms": {
    "enrollmentDate": "$exists(query.enrollmentDate) ? query.enrollmentDate : $now()",
    "incidentDate": "$exists(query.incidentDate) ? query.incidentDate : $now()"
  },
  "requests": {
    "response": [
      {
        "id": "dhis-enrollment",
        "config": {
          "method": "POST",
          "url": "http://dhis-web:8080/api/enrollments",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Basic YWRtaW46ZGlzdHJpY3Q="
          }
        }
      }
    ]
  },
  "constants": {
    "program": "UrRxeuNqeco"
  }
}
